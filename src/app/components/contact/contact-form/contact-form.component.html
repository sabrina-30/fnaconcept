<form 
  [formGroup]="contactForm" 
  (ngSubmit)="onSubmit()"
  name="contact"
  method="POST"
  data-netlify="true"
  class="space-y-6">
  
  <input type="hidden" name="form-name" value="contact" />

  <!-- Success Message -->
  <div *ngIf="formState.submitSuccess" 
       class="bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg">
    Merci pour votre message ! Nous vous répondrons dans les plus brefs délais.
  </div>

  <!-- Error Message -->
  <div *ngIf="formState.submitError" 
       class="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg">
    {{ formState.errorMessage }}
  </div>

  <!-- Nom -->
  <div>
    <label for="nom" class="block text-sm font-medium text-gray-700 mb-2">
      Nom *
    </label>
    <input 
      type="text" 
      id="nom" 
      name="nom"
      formControlName="nom"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fna-warm focus:border-transparent"
      [class.border-red-500]="hasFieldError('nom')" />
    <p *ngIf="hasFieldError('nom')" class="mt-1 text-sm text-red-600">
      {{ getFieldError('nom') }}
    </p>
  </div>

  <!-- Prénom -->
  <div>
    <label for="prenom" class="block text-sm font-medium text-gray-700 mb-2">
      Prénom *
    </label>
    <input 
      type="text" 
      id="prenom" 
      name="prenom"
      formControlName="prenom"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fna-warm focus:border-transparent"
      [class.border-red-500]="hasFieldError('prenom')" />
    <p *ngIf="hasFieldError('prenom')" class="mt-1 text-sm text-red-600">
      {{ getFieldError('prenom') }}
    </p>
  </div>

  <!-- E-mail -->
  <div>
    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
      E-mail *
    </label>
    <input 
      type="email" 
      id="email" 
      name="email"
      formControlName="email"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fna-warm focus:border-transparent"
      [class.border-red-500]="hasFieldError('email')" />
    <p *ngIf="hasFieldError('email')" class="mt-1 text-sm text-red-600">
      {{ getFieldError('email') }}
    </p>
  </div>

  <!-- Téléphone -->
  <div>
    <label for="telephone" class="block text-sm font-medium text-gray-700 mb-2">
      Numéro de téléphone *
    </label>
    <input 
      type="tel" 
      id="telephone" 
      name="telephone"
      formControlName="telephone"
      placeholder="+33 7 XX XX XX XX"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fna-warm focus:border-transparent"
      [class.border-red-500]="hasFieldError('telephone')" />
    <p *ngIf="hasFieldError('telephone')" class="mt-1 text-sm text-red-600">
      {{ getFieldError('telephone') }}
    </p>
  </div>

  <!-- Service -->
  <div>
    <label for="service" class="block text-sm font-medium text-gray-700 mb-2">
      Type de demande *
    </label>
    <select 
      id="service" 
      name="service"
      formControlName="service"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fna-warm focus:border-transparent"
      [class.border-red-500]="hasFieldError('service')">
      <option *ngFor="let option of serviceOptions" [value]="option.value">
        {{ option.label }}
      </option>
    </select>
    <p *ngIf="hasFieldError('service')" class="mt-1 text-sm text-red-600">
      {{ getFieldError('service') }}
    </p>
  </div>

  <!-- Message -->
  <div>
    <label for="message" class="block text-sm font-medium text-gray-700 mb-2">
      Votre message (décrivez brièvement votre projet) *
    </label>
    <textarea 
      id="message" 
      name="message"
      formControlName="message"
      rows="5"
      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-fna-warm focus:border-transparent resize-none"
      [class.border-red-500]="hasFieldError('message')"></textarea>
    <p *ngIf="hasFieldError('message')" class="mt-1 text-sm text-red-600">
      {{ getFieldError('message') }}
    </p>
  </div>

  <!-- Submit Button -->
  <button 
    type="submit"
    [disabled]="formState.isSubmitting"
    class="btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center">
    <span *ngIf="!formState.isSubmitting">Envoyer ma demande</span>
    <span *ngIf="formState.isSubmitting" class="flex items-center">
      <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
      Envoi en cours...
    </span>
  </button>
</form>
